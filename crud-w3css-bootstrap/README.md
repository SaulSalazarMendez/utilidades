# crud-w3css-bootstrap

Crea formularios para dar de alta o ver elementos de un api, o un arreglo o de lo que se quiera.

[DEMO W3CSS](https://saulsalazarmendez.github.io/ejemplos/try-coding/#N4IghgrgLg9gTiAXCAymAXwGwAQoLIgA0IUAllBJjEiACICmAtjNgMZwQAmAtAO4DMrAM5DuAIxgwoQqHDAAHIiABm9VgAswSAIwA2AOwAOfQFYALPwBMATmvnirGJ1IBzaogDaIADzsufQRFsKCYwAF4AHRJ6MEwo4PJKGEiQAAUOejEwbE56bDA4OHoXKiiAPm8Aej8eAWEhMqUAAVJGeXgobCj1KCh5IURK6s4AOwA6ACshXMxSADc4MZH6KEqR+UZKiSkZOXluUkcRoSbtMf4xgAZK5RgR1e3pWQUDo6Ex+qiIke+lVva4J0AOQ9PoDIYQdYAaxcHxgmxqAXq4kkTz2pyuYzMlTqImqHE4AHULlMgQBub7ff4dbDAbAAYTAbRghGweCc9Co2AAvthlHB4V0QKD+oNKpD5DC4QiCUiRCids95BjLljKswZjBJkIohSfiNMCtsOQmEJsGFsB5vtgbbTrbaHWQKFRENggQAJAAqeAAMthPdB4KRYkDCPaHTbckJ2KR5KxSHdXUCAJIjYLqUhmr2+4KBuDBzCsgCeMAg2F4pEwOGUpBGnGwzCK6bAacsl0u2HoAA8mfJDe9sITyOpsKW4KODbW8lFPXAi8bOgBNMdCTnKeL0ZywODF0tsFudrf5OvBegyTtgDSdnttQ3YEsQOCrzDKACEofDEdUGjArtoYBCJYYF4AAKABKT9uW+ABdPVvkNToNU5FgLWWXg2Q5KgQKBABBQFDiSIEwL1JCqA+XsYHeeQICEdQQLQhkKJA4BPxGeExCKJMnUIsM01tFZSAARwgFZfzdT0AFvnRgUMuj4m0yHaLjuygD95OwIoSjAAY3SKYTSCKTg1IdFsNBgJNtEsIFvm5MDiMpEZSK1VgKKomi6IYxlmWY1j2M4t0oxjOMExGWTPwE4TRKTBho3zYKAGfQtZT9FPMt0Qi7KAChiML1M0zBtKTPSIAMzdjNtUz1DSoFLOskZbPs/UnPI5k3No+j6HQrz2h89S2MYDj6CTb9NHKm0IpErKkwAMTUUbkvU1KkxGCABvoOAxo04oCp0oFnCEMAxENTgAB82O4OZM1II76DqhqSMwrVVygZNOGwkawCIuCDSNGpzRyGBWFW+h7jGSK5xQTk1G3bDEVxIQvocmoxmegB5EYfUzLK4BAkCzyyzgYDA80ylpCNPyKCg4DTBj0nhTN6BA7AQKKIQYEwOZ6EIIoJmh4mwlJuk5IjW0EK2s0LRNRh3iEWZWEZ/GwEJsYYGUZRntZRXldV9WjQAak7GQla1WZGHIRqRZtN52foMYqBcPGjcJ1lWYty3WfZznmc/S27XU33HSkWJXQXU07ZBlwoHUXiA8tnXntdLWtXj/XDYJk3WnIGPY4jU3yETp2M7NqBs5z20pZ01mfctqD/dtYjferm1IMa2zvuRtGRgANXW3HSE4fnBYdCmVkfGnOuwOmzdXJmWbPT2ua23nWCgQeyctpvsDFqX/orsYazrECuxJ7Au33ubsjCSWB71X2PY5xmpbdm025sxrvg7lZ0YAUS3ApZ/7qyTgAFKJrxYnlUe1NsC0wFNPRmzN76cxdvQZeq8T5CxFpvbedZuy7xCNLfetZOCplyF2I+J8z4fXNNfZ+EYK4eCId2aC/1gGwCELfd288H4gVYaAjhL9W7vxGJ/KA6McIuE0v/ZmvChBgJHlTce6Ep4M1nogxePM+boM3jI8+P5/r/kAmxUCtCHR72ou1GRJjbRqJ4SA2R/CeSCPbgSFGX8RjfzziMf+IF+5gQFuAiIshIGKMnrAlRc82YP25igzRAs/a+2waQvBYcD7EJwWQ4+cTKEX2ocaG+WCjSs3+kcGscBGAgSiDFGInZPEFDTnkTSWMBTYAAPxRCsTaUgygEFnmwAAMj6cadJ2AyhhA7GBcBZc95CD7IcR+6TCDaA6RGGxsgRLLN5JyVc8Sc4aJXiBZQsRVwbMpFAV+9UhEiPZJqECTkhEgGgtyIAA===)

[DEMO bootstrap](https://saulsalazarmendez.github.io/ejemplos/try-coding/#N4IghgrgLg9gTiAXCAymAXwGwAQoLIgA0IUAllBJjEiACICmAtjNgMZwQAmAtAO4DMrAM5DuAIxgwoQqHDAAHIiABm9VgAswSAIwA2AOwAOfQFYALCYBMhyye3FWMTqQDm1RAG0QAHnZdxLFBMYAC8ADogjkLMEdhkFFThIAAKHPRiYNic9NhgcHD0LlQRAHzeAPR+PBIlSgACpIzy8FDYEepQUPJCiOWVnAB2AHQAVkLZmKQAbnBDA/RQ5QPyjOUSUjJy8tykjgNCddpD/EMADOXKMAOL69KyCjt7QkPCQhFhAx9Kjc1wrQDkHS6PT6EGWAGsXC8YKsqnxBCIAht7vJDmchmY1pI7ltKhxOAAhGCjIT/ADcHw+Pxa2GA2AAwmAmjBCNg8E56FRsABfbDKOAwtogIHdXrlMHySHQ2H4+GvJE4hRo04Y8rMCbEsYRCmfAaYBbYchMITYELYDwfbBW2mW612+KUGCIbD/AASABU8AAZbDu6DwUhgTD/Qi2u1W7JCdikeSsUhXZ3/ACSAzi6lIJo93ri/rggcwrIAnjAINheKRMDhlKQBpxsMwCmmwKnLKdTth6AAPJnyfXPbAAdXI6mwJbgo71NZyEXdcELhtaAE0x0JOcpYvRnLA4EWS2xmx2t7la3F6DIO2ANB3u019dhixA4KvMMoAIQhsPh1QaMDO2hgII5hgXgAAoAEpP25D4AF0dQ+fVWnVTkWDNeZeDZDkqBA/4AEE/l2R1/jAnUkKoF4exgZ55AgIR1BAtCGQokDgE/AYYTEApEwdKgP1Ta0FlIABHCAFl/F13QAW4SGAQzaPirTIZouK7KBeLtAoijAHoXQKYTSAKTg1OtZsNCdF1tEsf4Pm5MDiMpAZSOJVgKKomi6IYxlmWY1j2M4l1I2jWN4wGWTPwE4TRMTBgozzIKAGeQtZT9FLM/4gk7KA8noMBQvk7ANMwLTE10iB9M3IyrRM9RUosqyBhsuzdUc8jmVc2j6PodDPOaby8rYxgOPoRNv00CqOzICLMsTAAxNRRqSvKUsTAYIAG+g4DGgqiv8jMwDEfVOAAHzY7gpgzUh9voOqGpIzDiVXKAk04bCRpyxr4INKpTSyGBWFW+hriGCK5xQTk1G3bC4QkIi4IGKohgegB5AYvQzTK4BAkCz0yzgYDA00SlpcNPwKCg4FTBjUhhDN6BA7AQIKIQYEwKZ6EIAoRnB/GQkJuk5PDa0EPys9vqNRhniESZWFp7GwFxoYYGUZQHtZWX5cV5WDQAag7GQ5eJSZGHIRqBatJ5mfoIYqBcLG9dx1lGZN03GeZ1n6c/U2bTyz37SkINnQXY0rYBlwoHUUNvZ9q0NYe501eJGPtd1nGDcacgI6jgXDfIOO7dTo2oAzzO7TF7TGY902oMjq1iM9iurUgxqbNh+GkYGAA1dbMdIThud5u0SYWR8Kc67AqaN1c6YZs9XbZ4XOdYKA+6J036+wIWxdFoJxaGataxAzsCewTtd7mzIQjNHunYFl2WdpsXr55Jv3rh/EEYWZGAFEtzyKee9ZTgAFKLLxYnlUmw9sCUwFBPWm9Nb6swdvQBeS8j58wFmvDetYuxbyDnvTgKZsidgPkfE+r1TSX17jqT2pcPA1kIdBb6gDYBCCoc7Ged8QJMOAawq0zdrIv1bh/AYOEXAaV/vTLhQgQGDzJiPdC48aZT3gXPDmXNUFr0kafH831/yATYqBR+Jdt5tTopIwx1plGcKAVInhT8dR8N1IIqAX9s4DF/iBK+PNQFhFkEPcmkDR4KMntPJmd92ZILUTzL2ntMGEJwTvPBBCuzEKiaQs+5DDSUIwQaRm309jVjgIwECERorZQ7K4vIyccgaTRgKbAAB+CI5irSkGUHAkWAAyDphosGHxKCEdsYFQHF1LgjXsux769MINoZp4ZLGyBErM3knJVzRMzqoxeIFlBBlXEsykUAHEOI+E49kGoQKORfiAaC3IgA===)

Demomento es la versión de javascript, despues agregare los archivos ts para que funcione con typescript.

## Install
```
npm i crud-w3css-bootstrap
```

## Setup

### Importar el webcomponent

Lo primero que se tiene que hacer es importar el webcomponent del crud.



Si es w3-css:
```js
import 'crud-w3css-bootstrap/w3css/crudW3.js';
```
Si es bootstrap
```js
import 'crud-w3css-bootstrap/bootstrap/crudBo.js';
```
### Agregar el webcomponent al html
Luego tenemos que definir donde va nuestro crud en el html
Si es w3css
```html
<crud-w3css tema="teal" titulo="Prueba de arreglo"></crud-w3css>
```
Notar: que el tema hace referencia a los temas de color de w3-css, para esta referencia [colores](https://www.w3schools.com/w3css/w3css_colors.asp).

Si es bootstrap
```html
<crud-bo tema="sandstone" titulo="Prueba de arreglo"></crud-bo>
```
Nota: el tema hace referencia a los diferentes temas de [boostwatch](https://bootswatch.com/), para usar solo poner el nombre del tema en minusculas.


### Definir el modelo

Nota vamos a manejar un crud sobre un arreglo de datos, asi que definiremos nuestros datos:
```js
let items = [
    {
        titulo: 'HTML Tutorial',
        descripcion: 'In this HTML tutorial, you will find more than 200 examples. With our online "Try it Yourself" editor, you can edit and test each example yourself!',
        fecha: Date.now()
    }
];
```

Para que funcione esta libreria es necesario definir el modelo del formulario. Esto se hace creando una objecto de la clase Modelo y despues agregamos campos según los ocupemos.


```js
import { Campo, Modelo } from "crud-w3css-bootstrap/modelo.js";

let modelo = new Modelo('Articulo');
modelo.campos.push(new Campo({
    nombre: 'titulo',
    etiqueta: 'Título', 
    tipo: 'text',
    reglas: 'required',
    ancho: '12'
}));

modelo.campos.push(new Campo({
    nombre: 'descripcion', 
    etiqueta: 'Descripción', 
    tipo: 'textarea', 
    reglas: 'required',
    ancho: '12'
}));

modelo.campos.push(new Campo({
    nombre: 'fecha',
    etiqueta: 'Fecha', 
    tipo: 'number',
    reglas: 'disabled|no-visible'
}));
```

Despues se describiran las clases Modelo, Campo y CampoCatalogo.

Se necesita definir el id del modelo para organizar los elementos.
```js
modelo.setId('fecha');
```

### seleccionar el webcomponente

Se tiene que seleccionar el webcomponente. 
si es w3css:
```js
let crud = document.querySelector('crud-w3css');
```
si es bootstrap
```js
let crud = document.querySelector('crud-bo');
```

### Definir el listar

```js
crud.setOnListar( fun: function(estado) )
```
donde

| var |  tipo   | descripcion   |
|-----|---------|---------------|
| fun | function| Es una función que regresa una promesa con la lista de elemntos a listar|
|estado| object| Contiene un objecto que contiene el estado del paginador, se utiliza para filtrar los elemntos de que se retornara al paginador|


En el ejemplo seria:
```js
crud.setOnListar((estado) => {     
    return new Promise( (resolve,reject) => {  
        let res = items.slice(estado.offset, estado.offset + estado.limit);
        resolve (
            {
                total:  items.length,
                offset: estado.offset + estado.limit,
                limit: estado.limit,
                items: res
            }
        );        
        
    });
});
```

### Definir ver

```js
crud.setOnVer( fun: function(id) )
```
donde

| var |  tipo   | descripcion   |
|-----|---------|---------------|
| fun | function| Es una función que regresa una promesa con el elemento de la listaque conside con el id|
|id| any| debe ser del mismo tipo con el que se define el id del modelo|

en el ejemplo
```js
crud.setOnVer((id) => {    
    return new Promise( (resolve, reject) => {        
        let item = items.find(x => x.fecha == id);
        resolve(item);
    });
});
```

### Define editar

```js
crud.setOnEditar( fun: function(id, datos) )
```
donde

| var |  tipo   | descripcion   |
|-----|---------|---------------|
| fun | function| Es una función que se encarga de guardar los datos, regresa una promesa con los datos actualizados|
|id| any| debe ser del mismo tipo con el que se define el id del modelo|
|datos|any|es el objecto de datos a actualizar|

en el ejemplo
```js
crud.setOnEditar( (id, datos) => {
    return new Promise( (resolve, reject) => {        
        let index = items.findIndex(x => x.fecha == id);
        items[index] = datos;
        resolve(datos);
    });
});
```

### Define agregar

```js
crud.setOnAgregar( fun: function(datos) )
```
donde

| var |  tipo   | descripcion   |
|-----|---------|---------------|
| fun | function| Es una función que se encarga de guardar los datos, regresa una promesa con los datos creados|
|datos|any|es el objecto de datos que se va a crear|

en el ejemplo
```js

crud.setOnAgregar( (datos) => {
    return new Promise( (resolve, reject) => {
        datos.fecha = Date.now();
        items.push(datos);
        resolve(datos);
    });
});
```

### Define eliminar
```js
crud.setOnEliminar(fun: function(id)); 

```

| var |  tipo   | descripcion   |
|-----|---------|---------------|
| fun | function| Es una función que se encarga de eliminar los datos, |
|id| any| debe ser del mismo tipo con el que se define el id del modelo|

en el ejemplo
```js
crud.setOnEliminar((id)=>{
	return new Promise((resolve,reject) => {
        let index = items.findIndex(x => x.fecha == id);
        let res = confirm("Desea eliminar este registro ?");
        if (res && index >=0 ){
            items.splice(index,1);
            resolve(true);
        } else {
            reject(false);
        }
	});
});
```

Con esto ya esta funcionando nuestro crud.